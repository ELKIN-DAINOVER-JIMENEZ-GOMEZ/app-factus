<!-- login.component.html -->
<div class="min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-gray-50 to-gray-100 px-4 sm:px-6 relative overflow-hidden">
  <!-- Decorative bg circles -->
  <div class="absolute -top-20 -right-20 w-96 h-96 bg-indigo-50/50 rounded-full blur-3xl"></div>
  <div class="absolute -bottom-20 -left-20 w-96 h-96 bg-indigo-50/30 rounded-full blur-3xl"></div>

  <!-- HEADER -->
  <div class="text-center mb-8 z-10 animate-fade-in-down">
    <div class="inline-flex mb-6 drop-shadow-lg animate-float">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQgQb8EohZOoy3jbbqfk0OFEYXlVfJMiYBXpw&s" 
           alt="Factus Logo" 
           class="w-20 h-20 rounded-xl object-cover">
    </div>
    <h1 class="text-3xl font-semibold text-gray-900 mb-2">Bienvenido al reto factus</h1>
    <p class="text-gray-600">Inicia sesión para gestionar tu facturación electrónica</p>
  </div>

  <!-- FORM -->
  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="w-full max-w-md bg-white rounded-xl shadow-sm border border-gray-100 p-8 sm:p-10 z-10 animate-fade-in-up">

    <!-- Alerts -->
    <div *ngIf="success" class="flex items-center gap-3 p-4 rounded-lg bg-green-50 text-green-800 border border-green-200 mb-6 text-sm font-medium">
      <svg width="18" height="18" fill="currentColor">
        <path d="M9 1a8 8 0 100 16A8 8 0 009 1zm3.7 6.7l-4 4a1 1 0 01-1.4 0l-2-2a1 1 0 011.4-1.4l1.3 1.3 3.3-3.3a1 1 0 011.4 1.4z"/>
      </svg>
      <span>¡Login exitoso! Redirigiendo...</span>
    </div>

    <div *ngIf="error && !success" class="flex items-center gap-3 p-4 rounded-lg bg-red-50 text-red-800 border border-red-200 mb-6 text-sm font-medium animate-shake">
      <svg width="18" height="18" fill="currentColor">
        <path d="M9 1a8 8 0 100 16A8 8 0 009 1zM8 5v4h2V5H8zm0 6v2h2v-2H8z"/>
      </svg>
      <span>{{ error }}</span>
    </div>

    <!-- Email -->
    <div class="mb-6">
      <label for="identifier" class="block text-sm font-semibold text-gray-900 mb-2">
        Email <span class="text-red-600">*</span>
      </label>
      <div class="relative">
        <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor">
          <path d="M3 4h14a1 1 0 011 1v10a1 1 0 01-1 1H3a1 1 0 01-1-1V5a1 1 0 011-1z" stroke-width="1.5"/>
          <path d="M2 5l8 5 8-5" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <input
          id="identifier"
          type="email"
          formControlName="identifier"
          placeholder="tu@email.com"
          [class.border-red-500]="hasError('identifier')"
          [class.border-green-500]="f['identifier'].valid && f['identifier'].touched"
          class="w-full pl-11 pr-4 py-3 border rounded-md focus:outline-none focus:ring-3 focus:ring-indigo-100 focus:border-indigo-500 transition"
          autocomplete="email"
          autofocus
        >
        <svg *ngIf="f['identifier'].valid && f['identifier'].touched" class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500 animate-check-pop" fill="currentColor">
          <path d="M10 2a8 8 0 100 16 8 8 0 000-16zm3.7 6.7l-4 4a1 1 0 01-1.4 0l-2-2a1 1 0 011.4-1.4l1.3 1.3 3.3-3.3a1 1 0 011.4 1.4z"/>
        </svg>
      </div>
      <div *ngIf="hasError('identifier')" class="mt-2 text-sm text-red-600 flex items-center gap-1 animate-fade-in">
        <svg width="14" height="14" fill="currentColor"><path d="M7 0a7 7 0 100 14A7 7 0 007 0zm1 10H6V9h2v1zm0-3H6V3h2v4z"/></svg>
        {{ getErrorMessage('identifier') }}
      </div>
    </div>

    <!-- Password -->
    <div class="mb-6">
      <div class="flex items-center justify-between mb-2">
        <label for="password" class="text-sm font-semibold text-gray-900">
          Contraseña <span class="text-red-600">*</span>
        </label>
        <a routerLink="/forgot-password" class="text-sm text-indigo-600 hover:text-indigo-700 font-medium">¿Olvidaste tu contraseña?</a>
      </div>
      <div class="relative">
        <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor">
          <path d="M5 9V6a5 5 0 0110 0v3M4 9h12a1 1 0 011 1v7a1 1 0 01-1 1H4a1 1 0 01-1-1v-7a1 1 0 011-1z" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <input
          id="password"
          [type]="showPassword ? 'text' : 'password'"
          formControlName="password"
          placeholder="••••••••"
          [class.border-red-500]="hasError('password')"
          [class.border-green-500]="f['password'].valid && f['password'].touched"
          class="w-full pl-11 pr-20 py-3 border rounded-md focus:outline-none focus:ring-3 focus:ring-indigo-100 focus:border-indigo-500 transition"
          autocomplete="current-password"
        >
        <button type="button" (click)="togglePassword()" class="absolute right-12 top-1/2 -translate-y-1/2 p-2 text-gray-500 hover:text-gray-900 hover:bg-gray-100 rounded-md transition" tabindex="-1">
          <svg *ngIf="!showPassword" width="20" height="20" fill="currentColor"><path d="M10 3C5 3 1.73 7.11 1 10c.73 2.89 4 7 9 7s8.27-4.11 9-7c-.73-2.89-4-7-9-7zm0 11.5a4.5 4.5 0 110-9 4.5 4.5 0 010 9zm0-7a2.5 2.5 0 100 5 2.5 2.5 0 000-5z"/></svg>
          <svg *ngIf="showPassword" width="20" height="20" fill="currentColor"><path d="M3.28 2.22a.75.75 0 00-1.06 1.06l14.5 14.5a.75.75 0 101.06-1.06l-2.3-2.3A9.97 9.97 0 0019 10c-.73-2.89-4-7-9-7-1.47 0-2.85.3-4.1.84L3.28 2.22zM10 6.5a3.5 3.5 0 013.14 1.93l-4.71 4.7A3.5 3.5 0 0110 6.5zM1 10c.73-2.89 4-7 9-7 .35 0 .69.02 1.03.05L8.97 5.11A3.5 3.5 0 006.5 10c0 .24.03.47.06.7L3.84 13.4C2.4 12.24 1.46 11.08 1 10z"/></svg>
        </button>
        <svg *ngIf="f['password'].valid && f['password'].touched" class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500 animate-check-pop" fill="currentColor">
          <path d="M10 2a8 8 0 100 16 8 8 0 000-16zm3.7 6.7l-4 4a1 1 0 01-1.4 0l-2-2a1 1 0 011.4-1.4l1.3 1.3 3.3-3.3a1 1 0 011.4 1.4z"/>
        </svg>
      </div>
      <div *ngIf="hasError('password')" class="mt-2 text-sm text-red-600 flex items-center gap-1 animate-fade-in">
        <svg width="14" height="14" fill="currentColor"><path d="M7 0a7 7 0 100 14A7 7 0 007 0zm1 10H6V9h2v1zm0-3H6V3h2v4z"/></svg>
        {{ getErrorMessage('password') }}
      </div>
    </div>

    <!-- Remember me -->
    <div class="mb-6">
      <label class="inline-flex items-center gap-3 cursor-pointer text-sm text-gray-600">
        <input type="checkbox" class="w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
        <span>Recordarme</span>
      </label>
    </div>

    <!-- Submit -->
    <button type="submit" class="w-full flex items-center justify-center gap-2 py-3 px-4 bg-indigo-600 text-white font-semibold rounded-md hover:bg-indigo-700 hover:-translate-y-0.5 hover:shadow-md active:translate-y-0 focus:outline-none focus:ring-3 focus:ring-indigo-100 transition disabled:opacity-70 disabled:cursor-not-allowed"
            [class.bg-green-600]="success"
            [disabled]="loading || success">
      <span *ngIf="!loading && !success" class="flex items-center gap-2">
        <svg width="20" height="20" fill="none" stroke="currentColor">
          <path d="M10 3v14M3 10h14" stroke-width="2" stroke-linecap="round"/>
          <path d="M7 3l3-3 3 3M7 17l3 3 3-3" stroke-width="2" stroke-linecap="round"/>
        </svg>
        Iniciar sesión
      </span>
      <span *ngIf="loading" class="flex items-center gap-2">
        <svg class="animate-spin" width="20" height="20" fill="none" stroke="currentColor">
          <circle cx="10" cy="10" r="8" stroke-width="2.5" stroke-dasharray="50" stroke-dashoffset="25"/>
        </svg>
        Iniciando sesión...
      </span>
      <span *ngIf="success" class="flex items-center gap-2">
        <svg width="20" height="20" fill="currentColor">
          <path d="M10 2a8 8 0 100 16 8 8 0 000-16zm3.7 6.7l-4 4a1 1 0 01-1.4 0l-2-2a1 1 0 011.4-1.4l1.3 1.3 3.3-3.3a1 1 0 011.4 1.4z"/>
        </svg>
        ¡Ingresando!
      </span>
    </button>

    <!-- Footer -->
    <div class="mt-7 pt-6 border-t border-gray-100 text-center text-sm text-gray-600">
      ¿No tienes cuenta?
      <a routerLink="/register" class="text-indigo-600 hover:text-indigo-700 font-semibold ml-1">Regístrate gratis</a>
    </div>
  </form>


  <!-- Features -->
  <div class="mt-8 flex flex-wrap items-center justify-center gap-6 z-10 text-sm text-gray-500">
    <div class="flex items-center gap-2">
      <svg width="20" height="20" fill="currentColor"><path d="M10 2a5 5 0 015 5v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2V7a5 5 0 015-5zm0 2a3 3 0 00-3 3v2h6V7a3 3 0 00-3-3z"/></svg>
      <span>Conexión segura</span>
    </div>
    <div class="flex items-center gap-2">
      <svg width="20" height="20" fill="currentColor"><path d="M9 1a8 8 0 100 16A8 8 0 009 1zm3.7 6.7l-4 4a1 1 0 01-1.4 0l-2-2a1 1 0 011.4-1.4l1.3 1.3 3.3-3.3a1 1 0 011.4 1.4z"/></svg>
      <span>DIAN aprobado</span>
    </div>
    <div class="flex items-center gap-2">
      <svg width="20" height="20" fill="currentColor"><path d="M10 2c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm-.5-9h1v5h-1V7zm0 6h1v1h-1v-1z"/></svg>
      <span>Soporte 24/7</span>
    </div>
  </div>
</div>

<!-- Animaciones rápidas (opcional) -->
<style>
@keyframes fade-in { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fade-in-down { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fade-in-up { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
@keyframes check-pop { 0% { opacity: 0; transform: scale(0.5); } 50% { transform: scale(1.1); } 100% { opacity: 1; transform: scale(1); } }
@keyframes shake { 0%,100% { transform: translateX(0); } 10%,30%,50%,70%,90% { transform: translateX(-4px); } 20%,40%,60%,80% { transform: translateX(4px); } }

.animate-fade-in { animation: fade-in 0.2s ease-out; }
.animate-fade-in-down { animation: fade-in-down 0.5s ease-out; }
.animate-fade-in-up { animation: fade-in-up 0.5s ease-out 0.3s backwards; }
.animate-float { animation: float 3s ease-in-out infinite; }
.animate-check-pop { animation: check-pop 0.3s ease-out; }
.animate-shake { animation: shake 0.4s ease-in-out; }
</style>